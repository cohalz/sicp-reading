# 条件式と述語
結果により異なる命令を実行するための方法の例

case analysis(ケース分析、事例分析)と呼ぶ。
Lispにはケース分析のための特殊形式が存在し、
**cond("conditional"(条件文)を表す)**
以下のように利用される

```Scheme
(define (abs x)
	(cond ((> x 0) x)
	((= x -0) 0)
	((< x 0) (- x))))
```

条件式の一般的な形式は以下

```Scheme
(cond (<p1> <e1>)
      (<p2> <e2>)
	  ...
	  (<pn> <en>))
```

記号*cond*から構成され、()で括った複数の式のペア

```Scheme
(<p> <e>)
```

これをclauses(クローズ、節)と呼ばれ、各ペアの最初の
式はpredicate(述語)　値が真か偽になる式である。
　条件式は次のように評価される。

1. 述語<p1>が最初に評価される。
1. <p1>の値が偽であれば次に<p2>が評価される。
1. <p2>も偽であれば<p3>が評価される。

値が真となる述語が見つかるまで続く。その際インタプリタ
は対応するクローズのconsequent expression(結果式)<e>の値
が条件式の値として返される。
真となる<p>が見つからない場合は*cond*は未定義。  

述語という単語は真か偽を返す手続き、真か偽と評価される式に用いられる
絶対値の手続きである*abs*はプリミティブな述語>,<,=を利用する。  
これは二つの数値を引数として取り、最初の数が２つ目の数に対して
大きいか、小さいか、等しいかをテストを行い真か偽を返す。  
以下に絶対値の手続きを書くもう一つの書き方を示す。

```Scheme
(define (abs x)
    (cond ((< x 0) (- x))
	(else x)))
```

この式は"もし x が 0 より小さい場合 -x を返す。そうでなければ x を返す"
と表現できる。*else*は特別なシンボルで*cond*の最後の節(クローズ)の
結果式<p>の場所で使うことができる。*else*を使うことで*cond*がその値として
述語<e>の値をそれ以前のクローズがすべて回避された場合にかえすことができる。  
もう一つの絶対値手続きの方法

```Scheme
(define (abs x)
    (if (< x 0)
        (- x)
		x))
```

上記は*if*という制約のある条件の型(?)を使用している。
ケース分析において正確に二つのケースが存在する場合に用いる。*if*式の一般的な形式は以下のようになる。

```Scheme
(if <predicate> <consequent> <alternative>)
```

if式の評価手順
1. 評価のためインタプリタは式の*<predicate>*の部分を評価する。
1. もし<predicate>の評価が真値の場合、<consequent>を評価しその値を返す。
1. そうでなければ<alternative>を評価し、その値を返す。
<, =, >のような述語に追加して論理複合命令が存在し、*複合述語*を構築することを可能にする。代表的なものに以下のようなものがある。

### and式

```Scheme
(and <e1> ... <en>)
```

式<e>を左から右へ１つずつ評価する。もし<e>のどれかが偽と評価された場合*and*式
の値は偽となり、残りの<e>は評価されない。もしすべての<e>の評価が真となれば
*and*式の値は最後の値となる。
### or式
```Scheme
(or <e1> ... <en>)
```

式<e>を左から右へ１つずつ評価する。もし<e>のどれかが真と評価されればその値が
*or*式の値として返され、<e>の残りは評価されない。もしすべての<e>が偽と
評価された場合、orの値は偽となる。
### not式
```Scheme
(not <e>)
```

*not*式の値は式<e>が偽と評価される時は真であり、そうでなければ偽となる。

*and*と*or*は特殊形式であり手続きでない。(部分式がすべて評価される必要がないため)notは通常の手続きである。
これらの式の例として、数値xが5<x<10の値域に存在するかどうかの条件式を示す。

```Sheme
(and (> x 5) (< x 10))
```

別の例として、ある数値が別の数値に対し等しいかより大きいかを示す述語
```Scheme
(define (>= x y) (or (> x y) (= x y)))
```
または
```Sheme
(define (>= x y) (not (< x y)))
```


